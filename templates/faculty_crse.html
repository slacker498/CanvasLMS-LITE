<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta 
    name="viewport" 
    content="width=device-width, initial-scale=1.0"
  />
  <title>Course: {{ course.name }}</title>
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/facultyCrsePg.css') }}"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
    rel="stylesheet"
  />
</head>
<body>
  <header>
    <h1>Course: {{ course.name }}</h1>
    <nav>
      <a href="{{ url_for('faculty_dashboard') }}">Dashboard</a>
      <a href="{{ url_for('manage_assignments', course_id=course_id) }}">
        Assignments
      </a>
      <a href="{{ url_for('modules.modules_page', course_id=course_id) }}">Modules</a>
      <a href="{{ url_for('faculty_grading', course_id=course_id) }}">
        Grading
      </a>
    </nav>
  </header>

  <h2>Announcements</h2>
  <form method="POST" action="{{ url_for('post_announcement', course_id=course_id) }}">
  <textarea name="announcement" required></textarea>
  <button type="submit">Post Announcement</button>
</form>

  <div class="container">
    <div class="left">
      <h2>Edit Course Details</h2>
      <form
        method="POST"
        action="{{ url_for('course_page', course_id=course_id) }}"
        class="space-y-4"
      >
        <label for="courseName">Course Name</label>
        <input
          type="text"
          id="courseName"
          name="courseName"
          value="{{ course.name }}"
          class="w-full border p-2 rounded"
          required
        />

        <label for="courseDescription">Description</label>
        <textarea
          id="courseDescription"
          name="courseDescription"
          rows="5"
          class="w-full border p-2 rounded"
        >{{ course.description }}</textarea>

        <button
          type="submit"
          class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700"
        >
          Update Course
        </button>
      </form>

      <h3>Modules</h3>
      {% if course.modules %}
        <ul>
          {% for module in course.modules %}
            <li>
              <strong>{{ module.title }}</strong> â€“
              {{ module.description or 'No description.' }}
              {% if module.files %}
                <ul class="ml-4">
                  {% for file in module.files %}
                    <li>
                      <a href="{{ url_for('static', filename='files/modules/' ~ file) }}" target="_blank">{{ file.split('/')[-1] }}</a>
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p>No modules yet.</p>
      {% endif %}
    </div>

    <div class="right">
        <h2>
            Enrolled Students
            <span class="count">({{ students|length }})</span>
        </h2>

        {% if students %}
            <div class="student-list">
            <table>
                <thead>
                <tr>
                    <th>Student Name</th>
                    <th>Student ID</th>
                </tr>
                </thead>
                <tbody>
                {% for stu in students %}
                    <tr>
                    <td>{{ stu.name }}</td>
                    <td>{{ stu.id }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            </div>
        {% else %}
            <p class="no-students">No students enrolled yet.</p>
        {% endif %}
        </div>
  </div>

  <footer>
    <div class="footer-left">
      <span>Echo - 2025</span>
    </div>
    <div class="rfooter">
      <span><a href="#">About</a></span>
      <span>Help</span>
      <span>Theme: Dark Mode</span>
    </div>
  </footer>
</body>
</html>